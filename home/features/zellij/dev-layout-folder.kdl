layout {
    pane_template name="ui" {
        compact_bar size=1 borderless=true
        pane split_direction="vertical" {
            filepicker size=40 name="picker"
            pane split_direction="horizontal" {
                editor size="75%" focus=true
                new_pane
            }
        }
    }

    tab hide_floating_panes=true {
        floating_panes {
            lazygit
        }
        ui
    }

    // TEMPLATES
    pane_template name="new_pane" {
        command "nix-develop-if-flake"
        args "zsh"
    }

    pane_template name="lazygit" {
        command "lazygit"
        x "10%"
        y "5%"
        width "80%"
        height "80%"
    }

    pane_template name="filepicker" {
        command "yazi-picker"
    }

    pane_template name="editor" {
        command "nix-develop-if-flake"
        args "nvim"
    }

    pane_template name="compact_bar" {
       plugin location="file:~/.config/zellij/plugins/zjstatus.wasm" {
            hide_frame_for_single_pane "true"

            format_center  "{tabs}"

            tab_normal               "#[fg=#585B70] {index}:{name}"
            tab_active               "#[fg=#B4BEFE,bold] {index}:{name}"
        }
    }
}
